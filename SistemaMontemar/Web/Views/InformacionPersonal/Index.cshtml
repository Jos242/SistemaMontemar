@model IEnumerable<Infrastructure.Models.AsignacionPlan>

@{
    ViewBag.Title = "Index";
}

<h2 class="mt-3">General Information</h2>

<div class="row mt-4">
    <div class="col-lg-6">
        <div class="card mb-4">
            <div class="card-body">
                <h3 class="card-title mb-3">@Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Usuario.FullName)</h3>
                <p class="card-text"><i class="fa-solid fa-envelope"></i> @Html.DisplayNameFor(model => model.Residencia.Usuario.Email): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Usuario.Email)</p>
                <p class="card-text"><i class="fa-solid fa-phone"></i> @Html.DisplayNameFor(model => model.Residencia.Usuario.Telefono): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Usuario.Telefono)</p>
                <p class="card-text"><i class="fa-solid fa-money-bill"></i> @Html.DisplayNameFor(model => model.Residencia.Usuario.DiaPagar): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Usuario.DiaPagar)</p>
            </div>
        </div>
        <div class="card">
            <div class="card-body" style="height: 465px; overflow: auto; overflow-x: hidden">
                <h3 class="card-title mb-3">Payment Plan History</h3>
                <table class="table">
                    <tr>
                        <th>
                            <i class="fa-solid fa-file-lines"></i> @Html.DisplayNameFor(model => model.PlanCobro.Descripcion)
                        </th>
                        <th>
                            <i class="fa-solid fa-calendar"></i> @Html.DisplayNameFor(model => model.Mes)
                        </th>
                        <th>
                            <i class="fa-solid fa-circle-info"></i> @Html.DisplayNameFor(model => model.Estado)
                        </th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.PlanCobro.Descripcion)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Anio) - @Html.DisplayFor(modelItem => item.Mes)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Estados[item.Estado])
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body">
                <h3 class="card-title mb-2">Residence: #@Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Id)</h3>
                <img src="data:image/jpeg;charset=utf-8;base64,@Convert.ToBase64String(Model.FirstOrDefault().Residencia.Imagen)"
                     alt="Libro @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Usuario.Nombre)"
                     class="img-fluid rounded mb-3" />
                <p class="card-text"><i class="fa-solid fa-person"></i> @Html.DisplayNameFor(model => model.Residencia.CantPersonas): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.CantPersonas)</p>
                <p class="card-text"><i class="fa-solid fa-car"></i> @Html.DisplayNameFor(model => model.Residencia.CantCarros): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.CantCarros)</p>
                <p class="card-text"><i class="fa-solid fa-calendar"></i> @Html.DisplayNameFor(model => model.Residencia.FechaAlquiler): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.FechaAlquiler)</p>
                <p class="card-text"><i class="fa-solid fa-house"></i> @Html.DisplayNameFor(model => model.Residencia.Tipo): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Tipos[Model.FirstOrDefault().Residencia.Tipo])</p>
                <p class="card-text"><i class="fa-solid fa-circle-info"></i> @Html.DisplayNameFor(model => model.Residencia.Estado): @Html.DisplayFor(modelItem => Model.FirstOrDefault().Residencia.Estados[Model.FirstOrDefault().Residencia.Estado])</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body" style="max-height: 300px; overflow: auto; overflow-x: hidden">
                <h3 class="card-title mb-3">Payment History</h3>
                <table class="table">
                    <tr>
                        <th>
                            <i class="fa-solid fa-calendar"></i> @Html.DisplayNameFor(model => model.Pago.FirstOrDefault().FechaPago)
                        </th>
                        <th>
                            <i class="fa-solid fa-money-bill-wave"></i> @Html.DisplayNameFor(model => model.Pago.FirstOrDefault().Total)
                        </th>
                    </tr>

                    @foreach (Infrastructure.Models.Pago item in ViewBag.Pagos)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.FechaPago)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Total)
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body" style="max-height: 300px; overflow: auto; overflow-x: hidden">
                <h3 class="card-title mb-3">Debt History</h3>
                <table class="table">
                    <tr>
                        <th>
                            <i class="fa-solid fa-calendar"></i> @Html.DisplayNameFor(model => model.Deuda.FirstOrDefault().FechaPago)
                        </th>
                        <th>
                            <i class="fa-solid fa-circle-info"></i> @Html.DisplayNameFor(model => model.Deuda.FirstOrDefault().Estado)
                        </th>
                    </tr>

                    @foreach (Infrastructure.Models.Deuda item in ViewBag.Deudas)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.FechaPago)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Estados[item.Estado])
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
</div>
